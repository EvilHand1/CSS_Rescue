*,
*::before,
*::after{
    box-sizing: border-box;
    margin:0;
    padding:0;
}
:root{
    --primary-color: #C3EEFA;
    --secondary-color: #805D3C;
    --size-bosmarmot:20dvw;


    --Arms-Appear:false;

    --Left-Claws-Appear:false;
    --Right-Claws-Appear: false;

    --Left-Arm-Top: false;
    --Right-Arm-Top: false;
}
body{
    min-block-size: 600dvh;
    background: linear-gradient(
        to bottom,
        var(--primary-color) 0 calc(var(--size-bosmarmot) * 0.8),
        var(--secondary-color) 0 100%
    );
    margin:0;
    /* height: 100dvh; */
    display:grid;
    place-items: center;
}


/* DE BOSMARMOT */
section:has(section){
    --size-line:calc(  var(--size-bosmarmot) / 100);
    width: var(--size-bosmarmot);
    aspect-ratio: 35/40;
    position: fixed;
    top: calc(var(--size-bosmarmot) * 0.6);
    animation: draaien linear;
    animation-timeline: scroll();
    animation-range-start: 30px;
    animation-iteration-count: 5;
    
    container-type: inline-size;

    & :nth-child(1n){
        position:absolute;
        border: var(--size-line) solid var(--border-color);
        background-color: var(--primary-color-groundhog);
        border-radius: 85% 85% 55% 55% / 75% 75% 95% 95%;
    }
}

section:has(> div){
    /* color pallete: https://www.color-hex.com/color-palette/1032945 */
    --primary-color-groundhog:#613522;
    --secondary-color-groundhog:#815d4e;
    --third-color-groundhog:#a0867a;
    --claw-color-groundhog:#dfd7d3;
    --border-color: black;
    --white:white;

    width:100%;
    height:100%;
    display:grid;
    justify-items: center;
    /* fur */
    & > label:first-child{
        top: 10%;
        width: 75%;
        height: 85%;
        background-color: var(--secondary-color-groundhog);
               &:has(input[value="--arm"]:not(:checked)){
                    cursor:pointer;
                }
            }
    /* head */
    & > :nth-child(2){
        bottom: 90%;
        width: 55%;
        height: 40%;
        transition: all 1s;     
    }
    /* left arm */
    & > fieldset:first-of-type,
    & > fieldset:nth-of-type(2){
        transform-origin: top;
        top: 15%;
        left: 10%;
        width: 20%;
        height: 60%; 
        rotate: 35deg;
        display:grid;
        
        /* This comes from Sannes code pen, but I did nest it with the help Niels
        https://codepen.io/shooft/pen/emYvarP
         */
        & label:not(:last-child) {
            grid-area:1/1;	
            pointer-events:none;
            opacity:0;	
            width:100%;
            height:100%;	
            &:has( :checked ) + label,
            &:first-child:has( ~ label:nth-last-child(2) :checked ){
                /* Niels told me to use a variable so that the priority doesn't need to be changed */
                pointer-events: var(--arm-pointer-events, all);
            }
        }
                
        /* The claw on the left hand */
        & >label:has(div) > :first-child{
            /* middle claw */
            rotate: 95deg;
            border-radius: 100% 0% 80% 30% / 80% 30% 100% 30%;            

            /* right claw */
            &::after, &::before{
                content:"";
                position:absolute;
                bottom: 150%;
                width: 110%;
                height: 120%;
                background-color: var(--claw-color-groundhog);
                border: var(--size-line) solid var(--border-color);
                border-radius: 100% 0% 80% 30% / 80% 30% 100% 30%;
            }
            /* left claw */
            &::before{
                bottom: -150%; 
            }
        }
    }

    /* Right arm */
    & > fieldset:nth-of-type(2){
        left: 70%;
        rotate: -35deg;
        /* The claw on the right hand */
        & >label:has(div) > :first-child{
            /* middle claw */
            rotate: -95deg;
            border-radius: 0% 100% 30% 80% / 30% 80% 30% 100%;            
            /* right claw */
            &::after, &::before{
                border-radius: 0% 100% 30% 80% / 30% 80% 30% 100%;
            }
            /* left claw */
            &::before{
                bottom: -180%;
            }
    }
}

    /* Left and right hands */
    & > fieldset:first-of-type > label:has(div),
    & > fieldset:nth-of-type(2) > label:has(div){ 
        bottom: -10%;
        width: 125%;
        height: 30%; 
        left: -15%;
        border-radius: 85% 85% 55% 55% / 75% 75% 95% 95%;
    }    
    /* the middle claws on the right and left hand */
   & >fieldset:first-of-type > label:has(div) > :first-child,
   &> fieldset:nth-of-type(2) > label:has(div) > :first-child{  
        bottom: -20%;
        left: 10%;
        width: 70%;
        height: 30%; 
        background-color: var(--claw-color-groundhog);
        z-index: -1;
    }

}



input {
	display:none;
}



section:has(input[value="--Left-Arm-1"]:checked) section:has(> div) > :nth-child(3){transform: rotate(10deg);}
section:has(input[value="--Left-Arm-2"]:checked) section:has(> div) > :nth-child(3){transform: rotate(30deg);}
section:has(input[value="--Left-Arm-3"]:checked) section:has(> div) > :nth-child(3){transform: rotate(50deg);}
section:has(input[value="--Left-Arm-4"]:checked) section:has(> div) > :nth-child(3){transform: rotate(70deg);}
section:has(input[value="--Left-Arm-5"]:checked) section:has(> div) > :nth-child(3){transform: rotate(90deg);}
section:has(input[value="--Right-Arm-1"]:checked) section:has(> div) > :nth-child(4){transform: rotate(-10deg);}
section:has(input[value="--Right-Arm-2"]:checked) section:has(> div) > :nth-child(4){transform: rotate(-30deg);}
section:has(input[value="--Right-Arm-3"]:checked) section:has(> div) > :nth-child(4){transform: rotate(-50deg);}
section:has(input[value="--Right-Arm-4"]:checked) section:has(> div) > :nth-child(4){transform: rotate(-70deg);}
section:has(input[value="--Right-Arm-5"]:checked) section:has(> div) > :nth-child(4){transform: rotate(-90deg);}


/* arms appear
idea to change it to container style queres came from Dante
*/

@container style(--Arms-Appear:false){
    section:has(> div) {
        &>fieldset:first-of-type > label,
        &>fieldset:nth-of-type(2) > label{
            --arm-pointer-events: none;
            cursor:default;
            
        }
        &> fieldset:first-of-type{
            /* border: transparent;
            background-color: transparent; */
    
            &>label:has(div){
                border: transparent;
                background-color: transparent;
            }
        }
        &> fieldset:nth-of-type(2){
            /* border: transparent;
            background-color: transparent; */
            pointer-events: none;
            &>label:has(div){
                border: transparent;
                background-color: transparent;
            }
        }
    }
}

/* arm appears */
  @container style(--Arms-Appear:true){ section:has(> div) {
    &> fieldset:first-of-type{
        animation: flickerBorder 1s linear;
        &>label:has(div){
            animation:invisible 1s linear, flickerBorder 1s linear 1s; 
            }
        }
    &> fieldset:nth-of-type(2){
        animation: invisible 2s linear, flickerBorder 1s linear 2s;
        &>label:has(div){
            animation:invisible 3s linear, flickerBorder 1s linear 3s; 
            }
        }
}
  }

@keyframes invisible {
    0%, 100%{
        border-color: transparent;
      background-color: transparent;
    }
}
@keyframes flickerBorder {
    0%, 20%, 40%, 60%, 80%, 100%{
      border-color: transparent;
      background-color: transparent;
    }
    10%, 30%, 50%, 70%, 90% {
      border-color: white;
      background-color: transparent;
    }
  }

  
/* Claws appear */
@container style(--Left-Claws-Appear:false){section:has(> div) > fieldset:first-of-type > label:has(div) > :first-child{display:none;}}
@container style(--Left-Claws-Appear:true){ section:has(> div) > fieldset:first-of-type > label:has(div) > :first-child{animation: claw .5s linear; --start: -55%;}}
@container style(--Right-Claws-Appear:false){section:has(> div) > fieldset:nth-of-type(2) > label:has(div) > :first-child{display:none;}}
@container style(--Right-Claws-Appear:true){section:has(> div) > fieldset:nth-of-type(2) > label:has(div) > :first-child{animation: claw .5s linear; --start: 55%;}}
   
    /* Chat GPT told me I could use a variable for the start when I asked if there was a way not to have the animation double. */
   @keyframes claw {
   from {
    transform: translateX(var(--start));
   }
   to{
    transform: translateX(0%)
   }
   }




@container style(--Left-Arm-Top:false) or style(--Right-Arm-Top:false){
    section:has(> div) > :nth-child(2){
        display: none;
    }
}

@container style(--Left-Arm-Top:false) or style(--Right-Arm-Top:false){ @container style(--Arms-Appear:true){
    section:has(>div){
    &>fieldset:first-of-type > label:not(:last-child),
    &> fieldset:nth-of-type(2) > label:not(:last-child){
        cursor:pointer;
    }}
}}


@container style(--Left-Arm-Top:true) and style(--Right-Arm-Top:true){
section:has(> div){
   & > :nth-child(2){
    animation: HeadBalloon 2s linear;
    }
    & > fieldset:first-of-type{
        animation: LowerArms 2s linear forwards;
        --start:90deg;
        & > label:not(:last-child){
           --arm-pointer-events: none;
        }
    }
    & > fieldset:nth-of-type(2){
        animation: LowerArms 2s linear forwards;
        --start:-90deg;
        & > label:not(:last-child){
            --arm-pointer-events: none;
        }
    }
}
}
@keyframes HeadBalloon {
    0%{
        transform-origin: bottom;
        transform:scaleY(0%) translateY(50%);
        z-index: -1;
    }
    40%, 60%{
        transform: scaleY(50%) translateY(50%);
        z-index: -1;
    }
    90%{
        transform:translateY(-25%);
    }
    100%{
        transform:scaleY(100%) translateY(0%);
    }
}

@keyframes LowerArms {
    from{
        transform: rotate(var(--start));
    }
    to{
        transform: rotate(0deg)
    }
}


html:has([value="--arm"]:checked) {
    --Arms-Appear: true;
  }

  html:has([value="--RightClaw"]:checked) {
    --Right-Claws-Appear:true;
  }
  html:has([value="--LeftClaw"]:checked) {
    --Left-Claws-Appear:true;
  }

  html:has([value="--Left-Arm-5"]:checked) {
    --Left-Arm-Top: true;
  }
  html:has([value="--Right-Arm-5"]:checked) {
    --Right-Arm-Top: true;
  }


    
